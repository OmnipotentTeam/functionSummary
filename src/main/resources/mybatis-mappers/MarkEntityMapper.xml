<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zhxx.service.szxt.mapper.MarkEntityMapper">
  <resultMap id="BaseResultMap" type="com.zhxx.service.szxt.entity.MarkEntity">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="mark_id" jdbcType="VARCHAR" property="markId" />
    <result column="student_id" jdbcType="VARCHAR" property="studentId" />
    <result column="user_id" jdbcType="INTEGER" property="userId" />
    <result column="mark_content" jdbcType="VARCHAR" property="markContent" />
    <result column="dimension_id" jdbcType="VARCHAR" property="dimensionId" />
    <result column="grade_evaluation_id" jdbcType="VARCHAR" property="gradeEvaluationId" />
    <result column="sys_content" jdbcType="VARCHAR" property="sysContent" />
    <result column="create_time" jdbcType="TIMESTAMP" property="createTime" />
    <result column="modify_time" jdbcType="TIMESTAMP" property="modifyTime" />
    <result column="status" jdbcType="INTEGER" property="status" />
  </resultMap>

  <resultMap id="SeeMap" type="com.zhxx.service.szxt.entity.MarkEntity">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="mark_id" jdbcType="VARCHAR" property="markId" />
    <result column="student_id" jdbcType="VARCHAR" property="studentId" />
    <result column="user_id" jdbcType="INTEGER" property="userId" />
    <result column="mark_content" jdbcType="VARCHAR" property="markContent" />
    <result column="dimension_id" jdbcType="VARCHAR" property="dimensionId" />
    <result column="grade_evaluation_id" jdbcType="VARCHAR" property="gradeEvaluationId" />
    <result column="sys_content" jdbcType="VARCHAR" property="sysContent" />
    <result column="create_time" jdbcType="TIMESTAMP" property="createTime" />
    <result column="modify_time" jdbcType="TIMESTAMP" property="modifyTime" />
    <result column="status" jdbcType="INTEGER" property="status" />

    <collection property="DimensionRecordEntity" ofType="com.zhxx.service.szxt.entity.DimensionRecordEntity">
      <result column="dimension_name" jdbcType="VARCHAR" property="dimensionName" />
      <result column="dimensionid" jdbcType="VARCHAR" property="dimensionId" />
      <result column="dimension_record_num" jdbcType="INTEGER" property="dimensionRecordNum" />

    </collection>
  </resultMap>


  <resultMap id="selectMark" type="com.zhxx.service.szxt.entity.MarkEntity">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="mark_id" jdbcType="VARCHAR" property="markId" />
    <result column="student_id" jdbcType="VARCHAR" property="studentId" />
    <result column="create_time" jdbcType="TIMESTAMP" property="createTime" />
    <result column="modify_time" jdbcType="TIMESTAMP" property="modifyTime" />
    <result column="grade_evaluation_id" jdbcType="VARCHAR" property="gradeEvaluationId" />
    <collection property="studentEntity" ofType="com.zhxx.service.szxt.entity.StudentEntity">
      <result column="major_id" jdbcType="VARCHAR" property="majorId" />
      <result column="student_no" jdbcType="VARCHAR" property="studentNo" />
      <result column="student_name" jdbcType="VARCHAR" property="studentName" />
      <result column="start_school" jdbcType="VARCHAR" property="startSchool" />
      <result column="student_phone_number" jdbcType="VARCHAR" property="studentPhoneNumber" />
      <result column="student_grade" jdbcType="INTEGER" property="studentGrade" />
      <result column="student_id" jdbcType="VARCHAR" property="studentId" />
      <collection property="majorEntity" ofType="com.zhxx.service.szxt.entity.MajorEntity">
        <result column="major_name" jdbcType="VARCHAR" property="majorName" />
      </collection>
    </collection>
    <collection property="gradeEvaluationEntity" ofType="com.zhxx.service.szxt.entity.GradeEvaluationEntity">
      <result column="grade_evaluation_id" jdbcType="VARCHAR" property="gradeEvaluationId" />
      <result column="evaluation_name" jdbcType="VARCHAR" property="evaluationName" />
      <collection property="questionBankEntity" ofType="com.zhxx.service.szxt.entity.QuestionBankEntity">
        <result column="user_id" jdbcType="INTEGER" property="userId" />
        <result column="username" jdbcType="VARCHAR" property="userName" />
        <result column="question_bank_name" jdbcType="VARCHAR" property="questionBankName" />
        <result column="question_bank_stage" jdbcType="INTEGER" property="questionBankStage" />
        <result column="question_bank_introduce" jdbcType="VARCHAR" property="questionBankIntroduce" />
        <result column="question_bank_file_path" jdbcType="VARCHAR" property="questionBankFilePath" />
        <result column="create_time" jdbcType="TIMESTAMP" property="createTime" />
        <result column="modify_time" jdbcType="TIMESTAMP" property="modifyTime" />
        <result column="status" jdbcType="INTEGER" property="status" />
      </collection>
    </collection>
  </resultMap>

  <resultMap id="selectMarkInfo" type="com.zhxx.service.szxt.entity.MarkEntity">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="mark_id" jdbcType="VARCHAR" property="markId" />
    <result column="student_id" jdbcType="VARCHAR" property="studentId" />
    <result column="grade_evaluation_id" jdbcType="VARCHAR" property="gradeEvaluationId" />
    <result column="sys_content" jdbcType="VARCHAR" property="sysContent" />
    <result column="mark_content" jdbcType="VARCHAR" property="markContent" />
    <collection property="studentEntity" ofType="com.zhxx.service.szxt.entity.StudentEntity">
      <result column="major_id" jdbcType="VARCHAR" property="majorId" />
      <result column="student_no" jdbcType="VARCHAR" property="studentNo" />
      <result column="student_name" jdbcType="VARCHAR" property="studentName" />
      <result column="student_grade" jdbcType="INTEGER" property="studentGrade" />
      <result column="student_id" jdbcType="VARCHAR" property="studentId" />
      <result column="student_sex" jdbcType="VARCHAR" property="studentSex" />
      <result column="student_age" jdbcType="INTEGER" property="studentAge" />
      <result column="student_phone_number" jdbcType="VARCHAR" property="studentPhoneNumber" />
      <result column="head_img" jdbcType="VARCHAR" property="headImg" />
      <collection property="majorEntity" ofType="com.zhxx.service.szxt.entity.MajorEntity">
        <result column="major_name" jdbcType="VARCHAR" property="majorName" />
      </collection>
    </collection>
    <collection property="gradeEvaluationEntity" ofType="com.zhxx.service.szxt.entity.GradeEvaluationEntity">
      <result column="grade_evaluation_id" jdbcType="VARCHAR" property="gradeEvaluationId" />
      <result column="evaluation_name" jdbcType="VARCHAR" property="evaluationName" />
      <result column="evaluation_type" jdbcType="VARCHAR" property="evaluationType" />
      <result column="grade" jdbcType="INTEGER" property="grade" />
      <collection property="questionBankEntity" ofType="com.zhxx.service.szxt.entity.QuestionBankEntity">
        <result column="user_id" jdbcType="INTEGER" property="userId" />
        <result column="username" jdbcType="VARCHAR" property="userName" />
        <result column="question_bank_name" jdbcType="VARCHAR" property="questionBankName" />
        <result column="question_bank_stage" jdbcType="INTEGER" property="questionBankStage" />
        <result column="question_bank_introduce" jdbcType="VARCHAR" property="questionBankIntroduce" />
        <result column="question_bank_file_path" jdbcType="VARCHAR" property="questionBankFilePath" />
        <result column="create_time" jdbcType="TIMESTAMP" property="createTime" />
        <result column="modify_time" jdbcType="TIMESTAMP" property="modifyTime" />
        <result column="status" jdbcType="INTEGER" property="status" />
      </collection>
    </collection>
    <collection property="answerEntity" ofType="com.zhxx.service.szxt.entity.AnswerEntity">
      <result column="answer_id" jdbcType="VARCHAR" property="answerId" />
      <result column="problem_id" jdbcType="VARCHAR" property="problemId" />
      <result column="solution_id" jdbcType="VARCHAR" property="solutionId" />
      <result column="mark_id" jdbcType="VARCHAR" property="markId" />
      <result column="create_time" jdbcType="TIMESTAMP" property="createTime" />
      <result column="modify_time" jdbcType="TIMESTAMP" property="modifyTime" />
      <result column="status" jdbcType="INTEGER" property="status" />
    </collection>
    <collection property="DimensionRecordEntity" ofType="com.zhxx.service.szxt.entity.DimensionRecordEntity">
      <result column="dimension_id" jdbcType="VARCHAR" property="dimensionId" />
      <result column="dimension_record_num" jdbcType="INTEGER" property="dimensionRecordNum" />
      <collection property="dimensionEntity" ofType="com.zhxx.service.szxt.entity.DimensionEntity">
        <result column="dimension_name" jdbcType="VARCHAR" property="dimensionName" />
      </collection>
    </collection>
  </resultMap>



  <resultMap id="Grade" type="com.zhxx.service.szxt.entity.GradeEvaluationEntity">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="grade_evaluation_id" jdbcType="VARCHAR" property="gradeEvaluationId" />
    <result column="question_id" jdbcType="VARCHAR" property="questionId" />
    <result column="user_id" jdbcType="INTEGER" property="userId" />
    <result column="grade" jdbcType="INTEGER" property="grade" />
    <result column="evaluation_name" jdbcType="VARCHAR" property="evaluationName" />
    <result column="evaluation_date" jdbcType="TIMESTAMP" property="evaluationDate" />
    <result column="evaluation_type" jdbcType="INTEGER" property="evaluationType" />
    <result column="evaluation_status" jdbcType="INTEGER" property="evaluationStatus" />
    <result column="create_time" jdbcType="TIMESTAMP" property="createTime" />
    <result column="modify_time" jdbcType="TIMESTAMP" property="modifyTime" />
    <result column="status" jdbcType="INTEGER" property="status" />
    <result column="dimension_id" jdbcType="VARCHAR" property="dimensionId" />

  </resultMap>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    mark_id, student_id, user_id, mark_content, dimension_id, grade_evaluation_id, sys_content, 
    create_time, modify_time, status
  </sql>
  <select id="selectByPrimaryKey" parameterType="java.lang.String" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select 
    <include refid="Base_Column_List" />
    from mark
    where mark_id = #{markId,jdbcType=VARCHAR}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from mark
    where mark_id = #{markId,jdbcType=VARCHAR}
  </delete>
  <insert id="insert" parameterType="com.zhxx.service.szxt.entity.MarkEntity">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into mark (mark_id, student_id, user_id, 
      mark_content, dimension_id, grade_evaluation_id, 
      sys_content, create_time, modify_time, 
      status)
    values (#{markId,jdbcType=VARCHAR}, #{studentId,jdbcType=VARCHAR}, #{userId,jdbcType=INTEGER}, 
      #{markContent,jdbcType=VARCHAR}, #{dimensionId,jdbcType=VARCHAR}, #{gradeEvaluationId,jdbcType=VARCHAR}, 
      #{sysContent,jdbcType=VARCHAR}, #{createTime,jdbcType=TIMESTAMP}, #{modifyTime,jdbcType=TIMESTAMP}, 
      #{status,jdbcType=INTEGER})
  </insert>
  <insert id="insertSelective" parameterType="com.zhxx.service.szxt.entity.MarkEntity">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into mark
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="markId != null">
        mark_id,
      </if>
      <if test="studentId != null">
        student_id,
      </if>
      <if test="userId != null">
        user_id,
      </if>
      <if test="markContent != null">
        mark_content,
      </if>
      <if test="dimensionId != null">
        dimension_id,
      </if>
      <if test="gradeEvaluationId != null">
        grade_evaluation_id,
      </if>
      <if test="sysContent != null">
        sys_content,
      </if>
      <if test="createTime != null">
        create_time,
      </if>
      <if test="modifyTime != null">
        modify_time,
      </if>
      <if test="status != null">
        status,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="markId != null">
        #{markId,jdbcType=VARCHAR},
      </if>
      <if test="studentId != null">
        #{studentId,jdbcType=VARCHAR},
      </if>
      <if test="userId != null">
        #{userId,jdbcType=INTEGER},
      </if>
      <if test="markContent != null">
        #{markContent,jdbcType=VARCHAR},
      </if>
      <if test="dimensionId != null">
        #{dimensionId,jdbcType=VARCHAR},
      </if>
      <if test="gradeEvaluationId != null">
        #{gradeEvaluationId,jdbcType=VARCHAR},
      </if>
      <if test="sysContent != null">
        #{sysContent,jdbcType=VARCHAR},
      </if>
      <if test="createTime != null">
        #{createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="modifyTime != null">
        #{modifyTime,jdbcType=TIMESTAMP},
      </if>
      <if test="status != null">
        #{status,jdbcType=INTEGER},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.zhxx.service.szxt.entity.MarkEntity">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update mark
    <set>
      <if test="studentId != null">
        student_id = #{studentId,jdbcType=VARCHAR},
      </if>
      <if test="userId != null">
        user_id = #{userId,jdbcType=INTEGER},
      </if>
      <if test="markContent != null">
        mark_content = #{markContent,jdbcType=VARCHAR},
      </if>
      <if test="dimensionId != null">
        dimension_id = #{dimensionId,jdbcType=VARCHAR},
      </if>
      <if test="gradeEvaluationId != null">
        grade_evaluation_id = #{gradeEvaluationId,jdbcType=VARCHAR},
      </if>
      <if test="sysContent != null">
        sys_content = #{sysContent,jdbcType=VARCHAR},
      </if>
      <if test="createTime != null">
        create_time = #{createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="modifyTime != null">
        modify_time = #{modifyTime,jdbcType=TIMESTAMP},
      </if>
      <if test="status != null">
        status = #{status,jdbcType=INTEGER},
      </if>
    </set>
    where mark_id = #{markId,jdbcType=VARCHAR}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.zhxx.service.szxt.entity.MarkEntity">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update mark
    set student_id = #{studentId,jdbcType=VARCHAR},
      user_id = #{userId,jdbcType=INTEGER},
      mark_content = #{markContent,jdbcType=VARCHAR},
      dimension_id = #{dimensionId,jdbcType=VARCHAR},
      grade_evaluation_id = #{gradeEvaluationId,jdbcType=VARCHAR},
      sys_content = #{sysContent,jdbcType=VARCHAR},
      create_time = #{createTime,jdbcType=TIMESTAMP},
      modify_time = #{modifyTime,jdbcType=TIMESTAMP},
      status = #{status,jdbcType=INTEGER}
    where mark_id = #{markId,jdbcType=VARCHAR}
  </update>

  <update id="updateByPrimaryKey1" parameterType="com.zhxx.service.szxt.entity.MarkEntity">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update mark
    set
    dimension_id = #{dimensionId,jdbcType=VARCHAR}
    where mark_id = #{markId,jdbcType=VARCHAR}
  </update>
  <select id="selectMarkComplete" parameterType="java.lang.String" resultMap="Grade">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select
    mark.dimension_id dimension_id,
    grade_evaluation.grade_evaluation_id,grade_evaluation.question_id,grade_evaluation.user_id,grade_evaluation.grade,grade_evaluation.evaluation_name,
    grade_evaluation.evaluation_date,grade_evaluation.evaluation_type,grade_evaluation.evaluation_status,grade_evaluation.status,grade_evaluation.create_time  ,grade_evaluation.modify_time
    from mark,grade_evaluation
    where mark.student_id = #{studentId,jdbcType=VARCHAR}
    AND mark.grade_evaluation_id=grade_evaluation.grade_evaluation_id
    AND mark.status=1
    ORDER BY mark.modify_time DESC
  </select>
  <select id="markStudentSeestudentId" parameterType="java.lang.String" resultMap="SeeMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select
    mark.*,dimension_record.dimension_id dimensionid ,dimension_record.dimension_record_num,dimension.dimension_name dimension_name
    from mark,dimension_record,dimension
    where student_id = #{studentId,jdbcType=VARCHAR}
    AND  mark.mark_id=dimension_record.mark_id
    AND dimension_record.dimension_id=dimension.dimension_id
    ORDER BY mark.create_time DESC ,dimension_record.dimension_record_num
  </select>
  <insert id="insertAnswerMark" parameterType="com.zhxx.service.szxt.entity.MarkEntity">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into mark
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="markId != null">
        mark_id,
      </if>
      <if test="studentId != null">
        student_id,
      </if>
      <if test="userId != null">
        user_id,
      </if>
      <if test="markContent != null">
        mark_content,
      </if>
      <if test="dimensionId != null">
        dimension_id,
      </if>
      <if test="gradeEvaluationId != null">
        grade_evaluation_id,
      </if>
      <if test="sysContent != null">
        sys_content,
      </if>
      <if test="createTime != null">
        create_time,
      </if>
      <if test="modifyTime != null">
        modify_time,
      </if>
      <if test="status != null">
        status,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="markId != null">
        #{markId,jdbcType=VARCHAR},
      </if>
      <if test="studentId != null">
        #{studentId,jdbcType=VARCHAR},
      </if>
      <if test="userId != null">
        #{userId,jdbcType=INTEGER},
      </if>
      <if test="markContent != null">
        #{markContent,jdbcType=VARCHAR},
      </if>
      <if test="dimensionId != null">
        #{dimensionId,jdbcType=VARCHAR},
      </if>
      <if test="gradeEvaluationId != null">
        #{gradeEvaluationId,jdbcType=VARCHAR},
      </if>
      <if test="sysContent != null">
        #{sysContent,jdbcType=VARCHAR},
      </if>
      <if test="createTime != null">
        #{createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="modifyTime != null">
        #{modifyTime,jdbcType=TIMESTAMP},
      </if>
      <if test="status != null">
        #{status,jdbcType=INTEGER},
      </if>
    </trim>
  </insert>


  <select id="searchNotMark" parameterType="java.util.Map" resultMap="selectMark">
    select
    student.major_id,student.student_name,student.student_grade,student.student_no,
    mark.mark_id,mark.student_id,mark.grade_evaluation_id,mark.create_time,mark.modify_time,
    grade_evaluation.grade_evaluation_id,grade_evaluation.evaluation_name,
    question_bank.*,
    major.major_name
    FROM mark
    LEFT JOIN student ON mark.student_id=student.student_id
    LEFT JOIN major ON student.major_id=major.major_id
    LEFT JOIN grade_evaluation ON mark.grade_evaluation_id=grade_evaluation.grade_evaluation_id
    LEFT JOIN question_bank ON grade_evaluation.question_id=question_bank.question_bank_id
    WHERE mark.mark_content is null
      <if test="majorId != null">
        AND student.major_id =#{majorId}
      </if>
      <if test="Grade != null">
      AND  grade_evaluation.grade=#{Grade}
      </if>
      <if test="studentNo != null">
      AND student.student_no LIKE CONCAT('%', #{studentNo}, '%')
      </if>
      <if test="studentName != null">
      AND  student.student_name LIKE CONCAT('%', #{studentName}, '%')
      </if>
      <if test="evaluationName != null">
      AND  grade_evaluation.evaluation_name LIKE CONCAT('%', #{evaluationName}, '%')
      </if>
    ORDER BY mark.create_time DESC
  </select>

  <select id="selectNotMarkComment" parameterType="java.util.Map" resultMap="selectMarkInfo">
    select
    student.major_id,student.student_name,student.student_grade,student.student_no,student.student_id,student.student_sex,student.student_age,student.student_phone_number,student.head_img,
    major.major_name,
    grade_evaluation.evaluation_type,grade_evaluation.grade,
    mark.sys_content,mark.mark_content,
    dimension_record.dimension_record_num,dimension_record.dimension_id,
    dimension.dimension_name,
    question_bank.*,
    answer.*
    FROM mark
    LEFT JOIN student ON mark.student_id=student.student_id
    LEFT JOIN major ON student.major_id=major.major_id
    LEFT JOIN answer ON mark.mark_id=answer.mark_id
    LEFT JOIN grade_evaluation ON mark.grade_evaluation_id=grade_evaluation.grade_evaluation_id
    LEFT JOIN question_bank ON grade_evaluation.question_id=question_bank.question_bank_id
    LEFT JOIN dimension_record ON dimension_record.mark_id=mark.mark_id
    LEFT JOIN dimension ON dimension_record.dimension_id=dimension.dimension_id
    WHERE mark.mark_id = #{markId,jdbcType=VARCHAR}

  </select>

  <select id="searchMark" parameterType="java.util.Map" resultMap="selectMark">
    select
    student.major_id,student.student_name,student.student_grade,student.student_no,
    mark.mark_id,mark.student_id,mark.grade_evaluation_id,mark.modify_time,
    grade_evaluation.grade_evaluation_id,grade_evaluation.evaluation_name,
    question_bank.*,
    major.major_name
    FROM mark
    LEFT JOIN student ON mark.student_id=student.student_id
    LEFT JOIN major ON student.major_id=major.major_id
    LEFT JOIN grade_evaluation ON mark.grade_evaluation_id=grade_evaluation.grade_evaluation_id
    LEFT JOIN question_bank ON grade_evaluation.question_id=question_bank.question_bank_id
    WHERE  1=1
      <if test="majorId != null">
      AND   student.major_id =#{majorId}
      </if>
      <if test="Grade != null">
        AND  grade_evaluation.grade=#{Grade}
      </if>
      <if test="studentNo != null">
        AND  student.student_no LIKE CONCAT('%', #{studentNo}, '%')
      </if>
      <if test="studentName != null">
        AND   student.student_name LIKE CONCAT('%', #{studentName}, '%')
      </if>
      <if test="evaluationName != null">
        AND   grade_evaluation.evaluation_name LIKE CONCAT('%', #{evaluationName}, '%')
      </if>
    ORDER BY mark.modify_time DESC

  </select>

  <select id="searchMarkGrade" parameterType="java.util.Map" resultMap="selectMark">
    select
      student.major_id,
      student.student_phone_number,
      student.student_name,
      student.student_grade,
      student.student_no,
      student.start_school,
      mark.mark_id,mark.student_id,
      mark.grade_evaluation_id as markGradeEvaluationId,
      mark.modify_time as markModifyTime,
      grade_evaluation.grade_evaluation_id,
      grade_evaluation.evaluation_name,
      question_bank.*,
      major.major_name
    FROM mark
    LEFT JOIN student ON mark.student_id=student.student_id
    LEFT JOIN major ON student.major_id=major.major_id
    LEFT JOIN grade_evaluation ON mark.grade_evaluation_id=grade_evaluation.grade_evaluation_id
    LEFT JOIN question_bank ON grade_evaluation.question_id=question_bank.question_bank_id
    <where>
      <if test="majorId != null and majorId != ''">
        AND   student.major_id =#{majorId}
      </if>
      <if test="Grade != null and Grade != ''">
        AND  student.start_school=#{Grade}
      </if>
      <if test="studentNo != null and studentNo != '' ">
        AND  student.student_no LIKE CONCAT('%', #{studentNo}, '%')
      </if>
      <if test="studentName != null and studentName != ''">
        AND   student.student_name LIKE CONCAT('%', #{studentName}, '%')
      </if>
      <if test="evaluationName != null and evaluationName != ''">
        AND   grade_evaluation.evaluation_name LIKE CONCAT('%', #{evaluationName}, '%')
      </if>
      <if test="studentPhoneNumber != null and studentPhoneNumber != ''">
        AND   student.student_phone_number, LIKE CONCAT('%', #{studentPhoneNumber}, '%')
      </if>
    </where>
    GROUP BY student.student_name, student.student_no
    ORDER BY mark.modify_time DESC

  </select>
  <select id="searchMarkGrade1" parameterType="java.util.Map" resultMap="selectMark">
    select
    student.major_id,
    student.student_name,
    student.student_grade,
    student.student_no,
    mark.mark_id,mark.student_id,
    mark.grade_evaluation_id as markGradeEvaluationId,
    mark.modify_time as markModifyTime,
    grade_evaluation.grade_evaluation_id,
    grade_evaluation.evaluation_name,
    question_bank.*,
    major.major_name
    FROM mark
    LEFT JOIN student ON mark.student_id=student.student_id
    LEFT JOIN major ON student.major_id=major.major_id
    LEFT JOIN grade_evaluation ON mark.grade_evaluation_id=grade_evaluation.grade_evaluation_id
    LEFT JOIN question_bank ON grade_evaluation.question_id=question_bank.question_bank_id
    <where>
      <if test="majorId != null">
        AND   student.major_id =#{majorId}
      </if>
      <if test="Grade != null">
        AND  grade_evaluation.grade=#{Grade}
      </if>
      <if test="studentNo != null">
        AND  student.student_no LIKE CONCAT('%', #{studentNo}, '%')
      </if>
      <if test="studentName != null">
        AND   student.student_name LIKE CONCAT('%', #{studentName}, '%')
      </if>
      <if test="evaluationName != null">
        AND   grade_evaluation.evaluation_name LIKE CONCAT('%', #{evaluationName}, '%')
      </if>
    </where>
    ORDER BY mark.modify_time DESC

  </select>


  <select id="selectStudentMark" parameterType="java.lang.String" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select
    <include refid="Base_Column_List" />
    from mark
    where student_id = #{studentId,jdbcType=VARCHAR}
    ORDER BY create_time DESC
  </select>

  <update id="pushMark" parameterType="com.zhxx.service.szxt.entity.MarkEntity">
    update mark
    set
      mark_content = #{markContent,jdbcType=VARCHAR},
      modify_time =  #{modifyTime,jdbcType=TIMESTAMP},
      dimension_id = #{dimensionId,jdbcType=VARCHAR},
      user_id= #{userId,jdbcType=INTEGER}
    where mark_id = #{markId,jdbcType=VARCHAR}
  </update>

  <select id="selectName" parameterType="java.lang.String" resultType="Map">

    select
   dimension.dimension_name
    from mark
    LEFT JOIN dimension on mark.dimension_id = dimension.dimension_id
    WHERE mark.mark_id=#{markId,jdbcType=VARCHAR}
  </select>

</mapper>

